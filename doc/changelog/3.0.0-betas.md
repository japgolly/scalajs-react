# 3.0.0-beta*x*

# Changes in beta1 (released as 2.2.0-beta1)

- Upgrade to React 18.

  - List of implemented features is here: https://github.com/japgolly/scalajs-react/issues/1057
  - For the moment, using class components emits the `Until you switch to the new API, your app will behave as if itâ€™s running React 17.` warning, even if the app was initialized the React 18 way (see [here](https://react.dev/blog/2022/03/08/react-18-upgrade-guide#updates-to-client-rendering-apis)).

- Addition of `React.majorVersion: Int`.

- Added a new typeclass `Renderable`, now required to invoke `render*` and `hydrate*` methods. Instances are provided for the expected types.

- Dependencies updates:

  - Scala.js upgraded to 1.15.0
  - microlibs upgraded to 4.2.1
  - Scala 3 upgraded to 3.1.2

- Added test utilities:

  - `TestContainer`/`TestReactRoot` and `.{outer,inner}HTML.assert*`
  - `WithDsl.*`
  - `replaceProps` replacement

- To upgrade when using `jsDependencies`, make your sbt config look like this (comments for clarity)

  ```scala
  // Required for React 18.3.1
  dependencyOverrides += "org.webjars.npm" % "scheduler" % "0.22.0",

  jsDependencies ++= Seq(
    // Polyfill required for React 18.3.1
    "org.webjars.npm" % "fast-text-encoding" % "1.0.6" / "text.min.js" minified "text.min.js"

    "org.webjars.npm" % "react" % "18.3.1"
      /         "umd/react.development.js"
      minified  "umd/react.production.min.js"
      dependsOn "text.min.js" // <-- Load the fast-text-encoding polyfill before loading React itself
      commonJSName "React",

    "org.webjars.npm" % "react-dom" % "18.3.1"
      /         "umd/react-dom.development.js"
      minified  "umd/react-dom.production.min.js"
      dependsOn "umd/react.development.js"
      commonJSName "ReactDOM",

    "org.webjars.npm" % "react-dom" % "18.3.1"
      /         "umd/react-dom-server.browser.development.js"
      minified  "umd/react-dom-server.browser.production.min.js"
      dependsOn "umd/react-dom.development.js"
      commonJSName "ReactDOMServer",
  ),
  ```

# Changes in beta2 (released as 2.2.0-beta2)

- Fix initialization issue due to `renderWithReuse` hooks using functional component with `React.memo`.

# Changes in beta3

- Add `useTransition` and `useId` hooks.
- Add `startTransition` React API.

- `ScalaFnComponent` and `ScalaForwardRef` now support `.withDisplayName(name)`. Must be called first (before hooks/`render*`/`withChildren*`).

Example:

```scala
  ScalaFnComponent.withDisplayName("MyComponent")
    .withHooks[Props]
    .useState(0)
    .render((_, s) => s.value.toString)
```

If not specified, a unique name will be inferred from the fully qualified name of the call site.

# Changes in beta4

- Add documentation.

# Changes in beta5

- Improve default display names.

# Changes in beta6

- Wrap router actions in `startTransition`, making the change of pages interruptible.

# Chengas in beta7

- Allow creating custom `Route` instances outside the DSL model. A `Route` just wraps functions to turn a `Path` into a potential page and vice-versa.
- Update some dependencies.

# Changes in beta8

- Monadic hooks

# Changes in beta9

- `useDeferredValue`, `useSyncExternalStore`, `useInsertionEffects`.
- Allow calling `useCallback*` with sync functions that return a value.

# Changes in beta10

- Modernize tests, prioritizing async.

# Changes in beta11

- Modernize tests, prioritizing async (Part 2).
